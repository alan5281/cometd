section of the [BayeuxCometdDocumentation Bayeux Cometd Documentation].

= Bayeux Chat Example =

Chat is the "hello world" of web-2.0. This page describes how Bayeux can be used to implement a basic and more advanced chat room.

= Basic Chat =

With a basic chat, all users in the same "room" see all the chat published by all other users.  This has an almost 1:1 correlation with how a Bayeux channel works, so it is very simple to create a basic chat room:

  * Pick a Cometd server (eg Jetty )
  * Pick a cometd client library (eg dojotoolkit)
  * Create a webapplications that includes the cometd servlet and can server the client library. 
  * Pick a channel name for your chat room: "/chat/demo"
  * Write client javascript that initializes cometd 
{{{
dojox.cometd.init("http://myhost/mycontext/cometd");
}}}
  * Write client javascript that listens for chat in "/chat/demo"
{{{
var room = {
  _username: "myuser",
  _chat: function(message){
    var from=message.data.user;
    var text=message.data.chat;
    // do something with chat
}
dojox.cometd.subscribe("/chat/demo", room, "_chat");
}}}
  * Write client javascript to tell the room you have joined:
{{{
dojox.cometd.publish("/chat/demo", { user: room._username, chat : room._user
name+" has joined"});
}}}
  * Write client javascript to publish anything typed by the user
{{{    
chat: function(text){
  dojox.cometd.publish("/chat/demo", { user: room._username, chat: text});
},
}}}

and that's it.  No server side code is required as messages published by clients on a channel ("room") are by default broadcast to all subscribers the that channel ("room").

This example can be seen as part of the  [http://svn.codehaus.org/jetty-contrib/jetty/tags/jetty-6.1.7/contrib/cometd/demo/src/main/webapp/examples/chat/ cometd demo]'s 

= User List =

But a basic chat room is not very functional.  Most reasonable chat rooms will provide a list of users that are currently in the room that will be updated as users join and leave.

== Client side user list ==

== Server side user list ==


= Security and Validation =

= Private Messages =

----
[BayeuxCometdDocumentation prev] [BayeuxCometdDocumentation up] [BayeuxCometdDocumentation next]
----